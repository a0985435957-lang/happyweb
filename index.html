<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>承億的旅遊日記</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
  </head>
  <body>
    <header id="header">
      <div class="logo">
          <i class="fas fa-map-marked-alt"></i>
          <span>Yi 之記憶蹤跡</span>
      </div>
      <nav class="navbar">
        <div class="nav-container">
          <ul class="nav-menu">
              <li class="nav-item"><a href="index.html" class="nav-link active">首頁</a></li>
              <li class="nav-item"><a href="introduce.html" class="nav-link">介紹</a></li>
              <li class="nav-item"><a href="track.html" class="nav-link">足跡</a></li>
              <li class="nav-item"><a href="future.html" class="nav-link">未來</a></li>
              <li class="nav-item"><a href="about.html" class="nav-link">關於</a></li>
          </ul>
        </div>
      </nav>
    </header>
    <section class="hero">
      <h1>探索這世界的每一處角落</h1>
      <p>Yi 起增加記憶的種子吧</p>
      <button class="hero-btn">進行開拓</button>
    </section>
    <main id="main-content">
      <div class="container">
        <div class="content-wrapper">
          <div class="poste">
            <h2>最新見聞</h2>
            <div class="posts-grid">
            </div>
          </div>
          <aside class="aside">
            <div class="widget" style="opacity: 1; transform: translateY(0px); transition: opacity 0.6s, transform 0.6s;">
                <h3>標籤分類</h3>
                <div class="tags-cloud">
                    <a href="#" class="tag-link">台灣 (5)</a>
                    <a href="#" class="tag-link">捷運 (3)</a>
                    <a href="#" class="tag-link">親子 (2)</a>
                    <a href="#" class="tag-link">餐廳 (4)</a>
                    <a href="#" class="tag-link">文化 (6)</a>
                    <a href="#" class="tag-link">旅館 (3)</a>
                </div>
            </div>
          </aside>
        </div>
      </div>
    </main>
    <footer></footer>
    <button id="backToTop" class="back-to-top" style="position: fixed; bottom: 20px; right: 20px; background: rgb(44, 90, 160); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; box-shadow: rgba(0, 0, 0, 0.2) 0px 2px 10px; opacity: 0; transform: translateY(0px); transition: 0.3s; z-index: 1000;"><i class="fas fa-arrow-up"></i></button>
    <script src="jquery.js"></script>
    <script>
        let backToTopButton = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            if(window.scrollY > 300) {
                backToTopButton.style.opacity = '1';
                backToTopButton.style.transform = 'translateY(0)';
            } else {
                backToTopButton.style.opacity = '0';
                backToTopButton.style.transform = 'translateY(20px)';
            }
        });

        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top : 0 ,
                behavior: 'smooth' 
            });
        });

        function scrollToContent() {
            document.getElementById('main-content').scrollIntoView({
                behavior: 'smooth'
            });
        }

        const hour = new Date().getHours();
        const greetingElement = document.querySelector('.hero h1');

        function greeting(){
            if(hour < 6){
                greetingElement.textContent = '夜深了，現在該到夢中繼續探索囉!' ;
            } else if(hour <12) {
                greetingElement.textContent = '清晨時分，開始準備今天的旅程吧!' ;
            } else if(hour <18) {
                greetingElement.textContent = '艷陽高照，享用美味的茶點吧!' ;
            } else {
                greetingElement.textContent = '夜幕降臨，辛苦了一天準備休息囉!' ;
            }
        }
        greeting();

        fetch('article.json')
        .then(res => res.json())
        .then(posts => renderPosts(posts));

        function renderPosts(posts){
            const container = document.querySelector('.posts-grid');
            container.innerHTML = posts.map(createPostCard).join('');

            /*posts.forEach(post => {
                const article  = createPostCard(post);
                container.appendChild(article);
            });*/
        }

        function createPostCard(post) {
            return `
                <article class="post-card">
                    <div class="post-image">
                        ${post.url ? `<a href="${post.url}"><img src="${post.image}" alt="${post.alt}"></a>` : ''}
                    </div>

                    <div class="post-content">
                        <h3>${post.url ? `<a href="${post.url}">${post.title}</a>` : post.title}</h3>
                        <div class="post-meta">
                        <span class="date"><i class="far fa-calendar"></i> ${post.date}</span>
                        </div>
                        <p class="post-excerpt"> 
                        ${post.excerpt.substring(0, 60)} ...
                        </p>
                        <div class="post-tags">
                        ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')} 
                        </div>
                        ${post.url ? `<div class="post-actions"><a href="${post.url}" class="read-more">Read More</a></div>` : ''}
                    </div>
                </article>
            `;
        }
    </script>
</body>
</html>